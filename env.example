# Configuration de l'application Heptuple Platform
# Copiez ce fichier vers .env et ajustez les valeurs selon votre environnement

# =============================================================================
# CONFIGURATION GÉNÉRALE
# =============================================================================
APP_NAME=heptuple-platform
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# GESTION AUTOMATIQUE DES PORTS
# =============================================================================
# Ports de base (seront incrémentés automatiquement pour chaque instance)
BASE_PORT=8080
API_BASE_PORT=8000
FRONTEND_BASE_PORT=3000
DB_BASE_PORT=5432
REDIS_BASE_PORT=6379
ELASTICSEARCH_BASE_PORT=9200
PROMETHEUS_BASE_PORT=9090
GRAFANA_BASE_PORT=3001

# Instance ID (0 = première instance, 1 = deuxième, etc.)
INSTANCE_ID=0

# Calcul automatique des ports
PORT_OFFSET=$((INSTANCE_ID * 100))
NGINX_PORT=$((BASE_PORT + PORT_OFFSET))
API_PORT=$((API_BASE_PORT + PORT_OFFSET))
FRONTEND_PORT=$((FRONTEND_BASE_PORT + PORT_OFFSET))
DB_PORT=$((DB_BASE_PORT + PORT_OFFSET))
REDIS_PORT=$((REDIS_BASE_PORT + PORT_OFFSET))
ELASTICSEARCH_PORT=$((ELASTICSEARCH_BASE_PORT + PORT_OFFSET))
PROMETHEUS_PORT=$((PROMETHEUS_BASE_PORT + PORT_OFFSET))
GRAFANA_PORT=$((GRAFANA_BASE_PORT + PORT_OFFSET))

# =============================================================================
# BASE DE DONNÉES POSTGRESQL
# =============================================================================
DB_HOST=postgres
DB_PORT_INTERNAL=5432
DB_NAME=heptuple_db_${INSTANCE_ID}
DB_USER=heptuple_user_${INSTANCE_ID}
DB_PASSWORD=your_secure_password_here
DB_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT_INTERNAL}/${DB_NAME}

# =============================================================================
# REDIS
# =============================================================================
REDIS_HOST=redis
REDIS_PORT_INTERNAL=6379
REDIS_DB=${INSTANCE_ID}
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT_INTERNAL}/${REDIS_DB}

# =============================================================================
# ELASTICSEARCH
# =============================================================================
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT_INTERNAL=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=your_elastic_password_here
ELASTICSEARCH_URL=http://${ELASTICSEARCH_USERNAME}:${ELASTICSEARCH_PASSWORD}@${ELASTICSEARCH_HOST}:${ELASTICSEARCH_PORT_INTERNAL}

# =============================================================================
# API BACKEND
# =============================================================================
API_HOST=0.0.0.0
API_PORT_INTERNAL=8000
API_WORKERS=4
API_RELOAD=true
CORS_ORIGINS=["http://localhost:${FRONTEND_PORT}", "http://localhost:${NGINX_PORT}", "https://yourdomain.com"]

# =============================================================================
# FRONTEND
# =============================================================================
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT_INTERNAL=3000
REACT_APP_API_URL=http://localhost:${NGINX_PORT}/api
REACT_APP_ENVIRONMENT=${ENVIRONMENT}

# =============================================================================
# NGINX
# =============================================================================
NGINX_PORT_INTERNAL=80
NGINX_SSL_PORT=8443
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# =============================================================================
# SÉCURITÉ
# =============================================================================
SECRET_KEY=your_super_secret_key_here_change_in_production
JWT_SECRET_KEY=your_jwt_secret_key_here_change_in_production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# MONITORING
# =============================================================================
PROMETHEUS_PORT_INTERNAL=9090
GRAFANA_PORT_INTERNAL=3000
JAEGER_PORT=16686

# =============================================================================
# LOGS
# =============================================================================
LOG_DIR=/var/log/heptuple
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# =============================================================================
# BACKUP
# =============================================================================
BACKUP_DIR=/backup
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# =============================================================================
# EMAIL (optionnel)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_TLS=true

# =============================================================================
# EXTERNAL SERVICES (optionnel)
# =============================================================================
# GOOGLE_OAUTH_CLIENT_ID=your_google_client_id
# GOOGLE_OAUTH_CLIENT_SECRET=your_google_client_secret
# GITHUB_OAUTH_CLIENT_ID=your_github_client_id
# GITHUB_OAUTH_CLIENT_SECRET=your_github_client_secret
